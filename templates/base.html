{% load static %}
<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}{{ site_settings.shop_name|default:'MegaCvet' }}{% endblock %}</title>

    <!-- –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —à—Ä–∏—Ñ—Ç–æ–≤ –∏–∑ Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&family=Montserrat:wght@400;700&family=Open+Sans:wght@400;700&family=Lora:wght@400;700&family=Merriweather:wght@400;700&family=Playfair+Display:wght@400;700&family=Lobster&family=Pacifico&display=swap" rel="stylesheet">

    <!-- –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ Swiper CSS -->
    <link rel="stylesheet" href="https://unpkg.com/swiper/swiper-bundle.min.css" />

    <!-- ‚ñº‚ñº‚ñº –°–ê–ú–ê–Ø –í–ê–ñ–ù–ê–Ø –°–¢–†–û–ö–ê: –ü–û–î–ö–õ–Æ–ß–ï–ù–ò–ï –í–ê–®–ï–ì–û –§–ê–ô–õ–ê –°–¢–ò–õ–ï–ô ‚ñº‚ñº‚ñº -->
    <link rel="stylesheet" href="{% static 'shop/css/main.css' %}">

    <style>
        :root {
            /* --- –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ, —É–ø—Ä–∞–≤–ª—è–µ–º—ã–µ –∏–∑ –∞–¥–º–∏–Ω–∫–∏ --- */
            /* –®—Ä–∏—Ñ—Ç—ã */
            --font-roboto: 'Roboto', sans-serif;
            --font-montserrat: 'Montserrat', sans-serif;
            --font-open-sans: 'Open Sans', sans-serif;
            --font-lora: 'Lora', serif;
            --font-merriweather: 'Merriweather', serif;
            --font-playfair-display: 'Playfair Display', serif;
            --font-lobster: 'Lobster', cursive;
            --font-pacifico: 'Pacifico', cursive;

            /* –û—Å–Ω–æ–≤–Ω—ã–µ —Å—Ç–∏–ª–∏ */
            --body-font-family: var(--font-{{ site_settings.body_font_family|default:'roboto' }});
            --heading-font-family: var(--font-{{ site_settings.heading_font_family|default:'montserrat' }});
            --base-font-size: {{ site_settings.base_font_size|default:16 }}px;
            --main-text-color: {{ site_settings.main_text_color|default:'#333333' }};
            --accent-color: {{ site_settings.accent_color|default:'#e53935' }};

            /* –°—Ç–∏–ª–∏ –∫–Ω–æ–ø–æ–∫ */
            --button-bg-color: {{ site_settings.button_bg_color|default:site_settings.accent_color }};
            --button-text-color: {{ site_settings.button_text_color|default:'#FFFFFF' }};
            --button-hover-bg-color: {{ site_settings.button_hover_bg_color|default:'#333333' }};
            --button-border-radius: {{ site_settings.button_border_radius|default:5 }}px;
            --button-font-family: var(--font-{{ site_settings.button_font_family|default:site_settings.body_font_family }});

            /* –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–ª—è –∫–Ω–æ–ø–∫–∏ "–í –∫–æ—Ä–∑–∏–Ω—É" —Å —Ñ–æ–ª–±—ç–∫–æ–º (–∑–∞–ø–∞—Å–Ω—ã–º –≤–∞—Ä–∏–∞–Ω—Ç–æ–º) */
            --add-to-cart-bg-color: {{ site_settings.add_to_cart_bg_color|default:'var(--button-bg-color)' }};
            --add-to-cart-text-color: {{ site_settings.add_to_cart_text_color|default:'var(--button-text-color)' }};
            --add-to-cart-hover-bg-color: {{ site_settings.add_to_cart_hover_bg_color|default:'var(--button-hover-bg-color)' }};
        }

        body {
            /* –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Ñ–æ–Ω, –µ—Å–ª–∏ –æ–Ω –µ—Å—Ç—å –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö */
            {% if site_settings.background_image %}
                background-image: url('{{ site_settings.background_image.url }}');
            {% endif %}
        }
    </style>
</head>
<body>

<div class="container">
    <header class="header">
        <div class="logo">
            <a href="{% url 'shop:home' %}" style="font-size: {{ site_settings.logo_font_size|default:24 }}px; color: {{ site_settings.logo_color|default:'var(--main-text-color)' }}; font-family: var(--font-{{ site_settings.logo_font_family|default:site_settings.heading_font_family }});">{{ site_settings.shop_name }}</a>
        </div>
        <form class="search-form" action="{% url 'shop:search_results' %}" method="get">
            <input type="text" name="q" placeholder="–ü–æ–∏—Å–∫ –ø–æ —Ç–æ–≤–∞—Ä–∞–º...">
            <button type="submit">–ù–∞–π—Ç–∏</button>
        </form>
        <nav class="user-navigation">
            {% if user.is_authenticated %}
                <a href="{% url 'shop:cabinet' %}">–õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç</a>
                &nbsp;(<a href="{% url 'logout' %}">–í—ã–π—Ç–∏</a>)
            {% else %}
                <a href="{% url 'login' %}">–í–æ–π—Ç–∏</a>
                &nbsp;|&nbsp;
                <a href="{% url 'users:register' %}">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</a>
            {% endif %}
            <div class="cart">
                <a href="{% url 'cart:cart_detail' %}">
                    üõí –ö–æ—Ä–∑–∏–Ω–∞: {{ cart|length }} —Ç–æ–≤–∞—Ä(–∞) –Ω–∞ {{ cart.get_total_price }} —Ä—É–±.
                </a>
            </div>
        </nav>
    </header>

    <nav class="category-nav">
        <a href="{% url 'shop:product_list_all' %}">–í—Å–µ —Ç–æ–≤–∞—Ä—ã</a>
        {% for c in categories %}
            <a href="{{ c.get_absolute_url }}">{{ c.name }}</a>
        {% endfor %}
    </nav>

    <main>
        {% block content %}
        {% endblock %}
    </main>

    <footer class="footer">
        <div class="footer-links">
            {% for page in footer_pages %}
                <a href="{{ page.get_absolute_url }}">{{ page.title }}</a>
            {% endfor %}
            <a href="{% url 'shop:contacts' %}">–ö–æ–Ω—Ç–∞–∫—Ç—ã</a>
        </div>
        <p>&copy; {% now "Y" %} {{ site_settings.shop_name }}. –í—Å–µ –ø—Ä–∞–≤–∞ –∑–∞—â–∏—â–µ–Ω—ã.</p>
    </footer>

</div>

<!-- –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ Swiper JS -->
<script src="https://unpkg.com/swiper/swiper-bundle.min.js"></script>
{% block extra_scripts %}{% endblock %}

</body>
</html>