<!-- orders/templates/orders/create.html -->
{% extends "base.html" %}

{% block title %}Оформление заказа{% endblock %}

{% block content %}
<div class="container" style="max-width: 800px; margin: 2rem auto;">
    <h1>Оформление заказа</h1>

    <div class="order-info">
        <h3>Ваш заказ</h3>
        <ul>
            {% for item in cart %}
                <li>
                    {{ item.quantity }}x {{ item.product.name }}
                    <span>{{ item.total_price }} руб.</span>
                </li>
            {% endfor %}
        </ul>
        <p><strong>Итого: {{ cart.get_total_price }} руб.</strong></p>
    </div>

    <form method="post" class="order-form">
        {% csrf_token %}

        <!-- Отрисовываем поля вручную для лучшего вида -->
        <div class="form-row">
            <div class="form-group">{{ form.first_name.label_tag }} {{ form.first_name }}</div>
            <div class="form-group">{{ form.last_name.label_tag }} {{ form.last_name }}</div>
        </div>
        <div class="form-group">{{ form.email.label_tag }} {{ form.email }}</div>
        <div class="form-group">{{ form.phone.label_tag }} {{ form.phone }}</div>
        <div class="form-group">{{ form.address.label_tag }} {{ form.address }}</div>
        <div class="form-row">
            <div class="form-group">{{ form.postal_code.label_tag }} {{ form.postal_code }}</div>
            <div class="form-group">{{ form.city.label_tag }} {{ form.city }}</div>
        </div>

        <button type="submit" class="btn-submit">Оформить заказ</button>
    </form>
</div>

<style>
    .order-info { background-color: #f0f0f0; padding: 15px; border-radius: 5px; margin-bottom: 20px; }
    .order-form .form-group { margin-bottom: 15px; }
    .order-form label { display: block; margin-bottom: 5px; font-weight: bold; }
    .form-control { width: 100%; padding: 10px; border: 1px solid #ccc; border-radius: 4px; box-sizing: border-box; }
    .form-row { display: flex; gap: 20px; }
    .form-row .form-group { flex: 1; }
    .btn-submit { background-color: #28a745; color: white; padding: 15px 25px; border: none; border-radius: 5px; font-size: 16px; cursor: pointer; }
</style>
{% endblock %}