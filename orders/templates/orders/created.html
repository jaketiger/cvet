<!-- orders/templates/orders/created.html -->
{% extends "base.html" %}

{% block title %}–ó–∞–∫–∞–∑ #{{ order.id }} –ø—Ä–∏–Ω—è—Ç - {{ site_settings.shop_name }}{% endblock %}

{% block content %}
<div class="order-confirmation-page">
    <!-- –§–û–ù –° –ê–ù–ò–ú–ê–¶–ò–ï–ô -->
    <div class="animation-background">
        <!-- –°—Ü–µ–Ω–∞ –¥–ª—è –∞–Ω–∏–º–∞—Ü–∏–π -->
        <div class="animation-scene">
            <!-- –≠–ª–µ–≥–∞–Ω—Ç–Ω–∞—è —Ñ–µ—è (—Ç–æ–ª—å–∫–æ –¥–ª—è –¥–µ—Å–∫—Ç–æ–ø–∞) -->
            <div class="elegant-fairy">
                <!-- –¢–µ–ª–æ —Ñ–µ–∏ -->
                <div class="fairy-body">
                    <div class="fairy-head">
                        <div class="face">
                            <div class="eyes">
                                <div class="eye left">
                                    <div class="pupil"></div>
                                    <div class="sparkle"></div>
                                </div>
                                <div class="eye right">
                                    <div class="pupil"></div>
                                    <div class="sparkle"></div>
                                </div>
                            </div>
                            <div class="smile"></div>
                            <div class="cheeks">
                                <div class="cheek left"></div>
                                <div class="cheek right"></div>
                            </div>
                        </div>
                        <div class="hair">
                            <div class="hair-main"></div>
                            <div class="hair-strand s1"></div>
                            <div class="hair-strand s2"></div>
                            <div class="hair-strand s3"></div>
                        </div>
                    </div>
                    <div class="fairy-dress">
                        <div class="dress-top"></div>
                        <div class="dress-skirt">
                            <div class="skirt-layer l1"></div>
                            <div class="skirt-layer l2"></div>
                        </div>
                    </div>
                    <div class="fairy-wings">
                        <div class="wing left">
                            <div class="wing-detail wd1"></div>
                            <div class="wing-detail wd2"></div>
                        </div>
                        <div class="wing right">
                            <div class="wing-detail wd1"></div>
                            <div class="wing-detail wd2"></div>
                        </div>
                    </div>
                    <div class="fairy-arms">
                        <div class="arm left">
                            <div class="upper-arm"></div>
                            <div class="forearm"></div>
                            <div class="hand"></div>
                        </div>
                        <div class="arm right">
                            <div class="upper-arm"></div>
                            <div class="forearm"></div>
                            <div class="hand"></div>
                        </div>
                    </div>
                </div>

                <!-- –°–≤–µ—á–µ–Ω–∏–µ —Ñ–µ–∏ -->
                <div class="fairy-glow"></div>
                <!-- –ú–∞–≥–∏—á–µ—Å–∫–∏–π —Å–ª–µ–¥ -->
                <div class="fairy-trail"></div>
            </div>

            <!-- –¶–≤–µ—Ç–æ—á–Ω—ã–π –¥–æ–∂–¥—å (—Ç–æ–ª—å–∫–æ –¥–ª—è –¥–µ—Å–∫—Ç–æ–ø–∞) -->
            <div class="flower-rain">
                <!-- –¶–≤–µ—Ç—ã —Å–æ–∑–¥–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ JavaScript -->
            </div>

            <!-- –í–æ–ª—à–µ–±–Ω—ã–µ —á–∞—Å—Ç–∏—Ü—ã -->
            <div class="magic-particles">
                <div class="particle p1"></div>
                <div class="particle p2"></div>
                <div class="particle p3"></div>
                <div class="particle p4"></div>
                <div class="particle p5"></div>
                <div class="particle p6"></div>
                <div class="particle p7"></div>
                <div class="particle p8"></div>
            </div>

            <!-- –ü–ª–∞–≤–∞—é—â–∏–µ —Å–µ—Ä–¥—Ü–∞ (—Ç–æ–ª—å–∫–æ –¥–ª—è –¥–µ—Å–∫—Ç–æ–ø–∞) -->
            <div class="floating-hearts">
                <div class="heart h1">üíñ</div>
                <div class="heart h2">üíù</div>
                <div class="heart h3">üíó</div>
                <div class="heart h4">üíì</div>
            </div>
        </div>
    </div>

    <!-- –û–°–ù–û–í–ù–û–ï –°–û–î–ï–†–ñ–ò–ú–û–ï -->
    <div class="confirmation-content">
        <div class="confirmation-card">
            <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ —Å –≥–∞–ª–æ—á–∫–æ–π -->
            <div class="confirmation-header">
                <div class="checkmark-container">
                    <div class="checkmark-circle">
                        <div class="checkmark">‚úì</div>
                        <div class="checkmark-glow"></div>
                        <div class="checkmark-sparkles">
                            <div class="sparkle s1">‚ú®</div>
                            <div class="sparkle s2">‚ú®</div>
                            <div class="sparkle s3">‚ú®</div>
                        </div>
                    </div>
                </div>
                <h1 class="confirmation-title">
                    –ó–∞–∫–∞–∑ –ü—Ä–∏–Ω—è—Ç!
                </h1>
                <p class="confirmation-subtitle">
                    –°–ø–∞—Å–∏–±–æ –∑–∞ –≤–∞—à –≤—ã–±–æ—Ä
                </p>
            </div>

            <!-- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∑–∞–∫–∞–∑–µ -->
            <div class="order-summary">
                <div class="summary-item">
                    <span class="summary-label">–ù–æ–º–µ—Ä –∑–∞–∫–∞–∑–∞</span>
                    <span class="summary-value order-id">#{{ order.id }}</span>
                </div>

                <div class="summary-item highlight">
                    <div class="total-amount-container">
                        <span class="summary-label">–ò—Ç–æ–≥–æ–≤–∞—è —Å—É–º–º–∞</span>
                        <span class="summary-value total-price">
                            {{ order.get_total_cost|floatformat:0 }} ‚ÇΩ
                        </span>
                    </div>
                    <div class="price-effect">
                        <div class="price-sparkle ps1">üí∞</div>
                        <div class="price-sparkle ps2">üíé</div>
                    </div>
                </div>
            </div>

            <!-- –ë–ª–∞–≥–æ–¥–∞—Ä—Å—Ç–≤–µ–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ -->
            <div class="thank-you-message">
                <div class="message-icon">üéâ</div>
                <div class="message-content">
                    <h3 class="message-title">–ë–ª–∞–≥–æ–¥–∞—Ä–∏–º –∑–∞ –¥–æ–≤–µ—Ä–∏–µ!</h3>
                    <p class="message-text">
                        –ú—ã —É–∂–µ –Ω–∞—á–∞–ª–∏ —Å–æ–±–∏—Ä–∞—Ç—å –≤–∞—à –∑–∞–∫–∞–∑ —Å –ª—é–±–æ–≤—å—é.
                        {% if order.email and order.email != 'no-email@provided.com' %}
                        –î–µ—Ç–∞–ª–∏ –∑–∞–∫–∞–∑–∞ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω—ã –Ω–∞ {{ order.email }}
                        {% endif %}
                    </p>
                </div>
            </div>

            <!-- –ö–Ω–æ–ø–∫–∏ –¥–µ–π—Å—Ç–≤–∏–π -->
            <div class="action-buttons">
                <a href="{% url 'shop:product_list_all' %}" class="action-btn continue-shopping">
                    <span class="btn-icon">üå∏</span>
                    <span class="btn-text">–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å –ø–æ–∫—É–ø–∫–∏</span>
                    <span class="btn-arrow">‚Üí</span>
                </a>

                <a href="/" class="action-btn go-home">
                    <span class="btn-icon">üè†</span>
                    <span class="btn-text">–ù–∞ –≥–ª–∞–≤–Ω—É—é</span>
                </a>
            </div>

            <!-- –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è -->
            <div class="additional-info">
                <div class="info-item">
                    <span class="info-icon">üí¨</span>
                    <span class="info-text">
                        –ù—É–∂–Ω–∞ –ø–æ–º–æ—â—å?
                        {% if site_settings.phone %}
                            –ó–≤–æ–Ω–∏—Ç–µ: {{ site_settings.phone }}
                        {% else %}
                            –°–≤—è–∂–∏—Ç–µ—Å—å —Å –Ω–∞–º–∏
                        {% endif %}
                    </span>
                </div>
            </div>
        </div>
    </div>
</div>

<style>
    /* –ë–ê–ó–û–í–´–ï –°–¢–ò–õ–ò */
    * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
    }

    .order-confirmation-page {
        min-height: 100vh;
        position: relative;
        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
        background: linear-gradient(135deg,
            rgba(255, 240, 245, 0.98) 0%,
            rgba(255, 235, 242, 0.95) 50%,
            rgba(255, 230, 239, 0.92) 100%);
        display: flex;
        align-items: center;
        justify-content: center;
        padding: 20px;
        overflow: hidden;
    }

    /* ===== –§–û–ù –° –ê–ù–ò–ú–ê–¶–ò–ï–ô ===== */
    .animation-background {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        pointer-events: none;
        z-index: 1;
    }

    .animation-scene {
        position: absolute;
        width: 100%;
        height: 100%;
    }

    /* ===== –§–ï–Ø (–¢–û–õ–¨–ö–û –î–õ–Ø –î–ï–°–ö–¢–û–ü–ê) ===== */
    @media (min-width: 769px) {
        .elegant-fairy {
            position: absolute;
            top: 50%;
            left: -200px;
            width: 180px;
            height: 320px;
            z-index: 10;
            opacity: 0;
            animation: fairyGrandEntrance 2.5s cubic-bezier(0.34, 1.56, 0.64, 1) forwards,
                       fairyGracefulFloat 6s 2.5s ease-in-out infinite;
        }

        .fairy-body {
            position: relative;
            width: 100%;
            height: 100%;
        }

        /* –ì–æ–ª–æ–≤–∞ —Ñ–µ–∏ —Å –¥–µ—Ç–∞–ª—è–º–∏ */
        .fairy-head {
            position: absolute;
            top: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 60px;
            height: 70px;
            z-index: 5;
        }

        .face {
            position: absolute;
            width: 100%;
            height: 70px;
            background: linear-gradient(135deg, #FFE4E6 0%, #FECDD3 100%);
            border-radius: 50%;
            box-shadow: inset 0 2px 4px rgba(255, 255, 255, 0.5);
        }

        .eyes {
            position: absolute;
            top: 25px;
            left: 50%;
            transform: translateX(-50%);
            width: 40px;
            display: flex;
            justify-content: space-between;
            z-index: 2;
        }

        .eye {
            position: relative;
            width: 14px;
            height: 14px;
            background: white;
            border-radius: 50%;
            overflow: hidden;
            animation: eyeBlink 5s infinite;
        }

        .pupil {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 8px;
            height: 8px;
            background: linear-gradient(135deg, #3B82F6 0%, #1D4ED8 100%);
            border-radius: 50%;
        }

        .sparkle {
            position: absolute;
            top: 2px;
            right: 2px;
            width: 3px;
            height: 3px;
            background: white;
            border-radius: 50%;
            animation: eyeSparkle 2s infinite;
        }

        .smile {
            position: absolute;
            bottom: 15px;
            left: 50%;
            transform: translateX(-50%);
            width: 24px;
            height: 12px;
            border-bottom: 3px solid #DB2777;
            border-radius: 0 0 12px 12px;
            animation: smileBlink 4s infinite;
        }

        .cheeks {
            position: absolute;
            top: 40px;
            left: 50%;
            transform: translateX(-50%);
            width: 60px;
            height: 15px;
            display: flex;
            justify-content: space-between;
        }

        .cheek {
            width: 16px;
            height: 8px;
            background: radial-gradient(circle, rgba(251, 113, 133, 0.4) 0%, rgba(244, 63, 94, 0.2) 70%, transparent 100%);
            border-radius: 50%;
            animation: blush 5s infinite;
        }

        .cheek.left {
            margin-left: -20px;
        }

        .cheek.right {
            margin-right: -20px;
        }

        /* –í–æ–ª–æ—Å—ã —Ñ–µ–∏ */
        .hair {
            position: absolute;
            top: -15px;
            left: 50%;
            transform: translateX(-50%);
            width: 70px;
            height: 50px;
        }

        .hair-main {
            position: absolute;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #92400E 0%, #B45309 100%);
            border-radius: 50% 50% 40% 40%;
            animation: hairFlow 4s ease-in-out infinite;
        }

        .hair-strand {
            position: absolute;
            top: 50px;
            background: linear-gradient(to bottom, #92400E 0%, #78350F 100%);
            border-radius: 8px;
            filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.1));
        }

        .s1 {
            left: 10px;
            width: 10px;
            height: 50px;
            transform: rotate(-15deg);
            animation: strandFlow1 3s ease-in-out infinite;
        }

        .s2 {
            left: 30px;
            width: 8px;
            height: 60px;
            transform: rotate(0deg);
            animation: strandFlow2 3s 0.2s ease-in-out infinite;
        }

        .s3 {
            right: 10px;
            width: 10px;
            height: 50px;
            transform: rotate(15deg);
            animation: strandFlow3 3s 0.4s ease-in-out infinite;
        }

        /* –ü–ª–∞—Ç—å–µ —Ñ–µ–∏ */
        .fairy-dress {
            position: absolute;
            top: 70px;
            left: 50%;
            transform: translateX(-50%);
            width: 70px;
            height: 150px;
            z-index: 3;
        }

        .dress-top {
            position: absolute;
            top: 0;
            width: 100%;
            height: 40px;
            background: linear-gradient(to bottom, #EC4899 0%, #DB2777 100%);
            border-radius: 35px 35px 0 0;
        }

        .dress-skirt {
            position: absolute;
            top: 40px;
            width: 100%;
            height: 110px;
            background: linear-gradient(to bottom, #DB2777 0%, #BE185D 100%);
            border-radius: 0 0 35px 35px;
            overflow: hidden;
        }

        .skirt-layer {
            position: absolute;
            bottom: 0;
            width: 100%;
            background: linear-gradient(to top, rgba(255, 255, 255, 0.2) 0%, transparent 100%);
            border-radius: 0 0 35px 35px;
        }

        .l1 { height: 80px; animation: skirtLayer1 4s ease-in-out infinite; }
        .l2 {
            height: 60px;
            left: 10px;
            width: calc(100% - 20px);
            animation: skirtLayer2 4s 0.2s ease-in-out infinite;
        }

        /* –ö—Ä—ã–ª—å—è —Ñ–µ–∏ */
        .fairy-wings {
            position: absolute;
            top: 50px;
            left: 50%;
            transform: translateX(-50%);
            width: 240px;
            height: 180px;
            z-index: 2;
        }

        .wing {
            position: absolute;
            width: 120px;
            height: 180px;
            background: linear-gradient(135deg,
                rgba(255, 255, 255, 0.9) 0%,
                rgba(253, 164, 175, 0.8) 50%,
                rgba(236, 72, 153, 0.7) 100%);
            border-radius: 100% 100% 100% 0;
            filter: drop-shadow(0 8px 20px rgba(236, 72, 153, 0.3));
            transform-origin: right center;
            backdrop-filter: blur(4px);
        }

        .wing.left {
            left: 0;
            transform: rotateY(180deg);
            animation: wingFlapLeft 1.8s ease-in-out infinite;
        }

        .wing.right {
            right: 0;
            animation: wingFlapRight 1.8s 0.9s ease-in-out infinite;
        }

        .wing-detail {
            position: absolute;
            background: rgba(255, 255, 255, 0.4);
            border-radius: 50%;
        }

        .wd1 {
            top: 30%;
            left: 30%;
            width: 20px;
            height: 20px;
        }

        .wd2 {
            bottom: 30%;
            right: 30%;
            width: 15px;
            height: 15px;
        }

        /* –†—É–∫–∏ —Ñ–µ–∏ */
        .fairy-arms {
            position: absolute;
            top: 75px;
            left: 50%;
            transform: translateX(-50%);
            width: 150px;
            height: 100px;
            z-index: 4;
        }

        .arm {
            position: absolute;
            top: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .arm.left {
            left: 0;
            animation: armFlowLeft 4s ease-in-out infinite;
        }

        .arm.right {
            right: 0;
            animation: armFlowRight 4s 0.5s ease-in-out infinite;
        }

        .upper-arm {
            width: 16px;
            height: 45px;
            background: linear-gradient(to bottom, #FFE4E6 0%, #FECDD3 100%);
            border-radius: 8px;
            transform-origin: top center;
        }

        .forearm {
            width: 14px;
            height: 40px;
            background: linear-gradient(to bottom, #FFE4E6 0%, #FECDD3 100%);
            border-radius: 7px;
            transform-origin: top center;
        }

        .hand {
            width: 16px;
            height: 22px;
            background: linear-gradient(to bottom, #FFE4E6 0%, #FECDD3 100%);
            border-radius: 8px;
        }

        /* –°–≤–µ—á–µ–Ω–∏–µ —Ñ–µ–∏ */
        .fairy-glow {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 350px;
            height: 350px;
            background: radial-gradient(circle,
                rgba(236, 72, 153, 0.25) 0%,
                rgba(219, 39, 119, 0.15) 40%,
                transparent 70%);
            border-radius: 50%;
            animation: fairyGlowPulse 3s ease-in-out infinite;
            filter: blur(25px);
            z-index: 1;
        }

        /* –ú–∞–≥–∏—á–µ—Å–∫–∏–π —Å–ª–µ–¥ */
        .fairy-trail {
            position: absolute;
            top: 50%;
            left: -100px;
            width: 200px;
            height: 20px;
            background: linear-gradient(90deg,
                transparent,
                rgba(236, 72, 153, 0.3),
                rgba(219, 39, 119, 0.2),
                transparent);
            border-radius: 10px;
            filter: blur(10px);
            animation: fairyTrail 2.5s linear forwards;
            z-index: 0;
        }

        /* –ê–Ω–∏–º–∞—Ü–∏–∏ —Ñ–µ–∏ */
        @keyframes fairyGrandEntrance {
            0% {
                opacity: 0;
                transform: translateX(-100px) translateY(-50%) scale(0.3) rotateY(90deg);
            }
            20% {
                opacity: 0.8;
                transform: translateX(100px) translateY(-50%) scale(0.7) rotateY(45deg);
            }
            40% {
                opacity: 1;
                transform: translateX(300px) translateY(-30%) scale(0.9) rotateY(0deg);
            }
            60% {
                transform: translateX(500px) translateY(-60%) scale(1) rotateY(-45deg);
            }
            80% {
                transform: translateX(700px) translateY(-40%) scale(1.1) rotateY(0deg);
            }
            100% {
                opacity: 1;
                transform: translateX(50vw) translateY(-50%) scale(1) rotateY(0deg);
            }
        }

        @keyframes fairyGracefulFloat {
            0%, 100% {
                transform: translateX(50vw) translateY(-50%) translateY(0) rotate(0deg);
            }
            25% {
                transform: translateX(50vw) translateY(-50%) translateY(-20px) rotate(-2deg);
            }
            50% {
                transform: translateX(50vw) translateY(-50%) translateY(0) rotate(0deg);
            }
            75% {
                transform: translateX(50vw) translateY(-50%) translateY(20px) rotate(2deg);
            }
        }

        @keyframes fairyTrail {
            0% {
                left: -100px;
                opacity: 0;
            }
            20% {
                opacity: 0.5;
            }
            80% {
                opacity: 0.5;
            }
            100% {
                left: 100%;
                opacity: 0;
            }
        }
    }

    /* ===== –û–ë–©–ò–ï –ê–ù–ò–ú–ê–¶–ò–ò –§–ï–ò ===== */
    @keyframes eyeBlink {
        0%, 45%, 55%, 100% { height: 14px; }
        50% { height: 3px; }
    }

    @keyframes eyeSparkle {
        0%, 100% { opacity: 1; transform: scale(1); }
        50% { opacity: 0.5; transform: scale(0.8); }
    }

    @keyframes smileBlink {
        0%, 40%, 60%, 100% { width: 24px; }
        50% { width: 20px; }
    }

    @keyframes blush {
        0%, 100% { opacity: 0.4; transform: scale(1); }
        50% { opacity: 0.8; transform: scale(1.1); }
    }

    @keyframes hairFlow {
        0%, 100% { transform: translateX(-50%) scaleY(1); }
        50% { transform: translateX(-50%) scaleY(1.05); }
    }

    @keyframes strandFlow1 {
        0%, 100% { transform: rotate(-15deg) translateY(0); }
        50% { transform: rotate(-18deg) translateY(4px); }
    }

    @keyframes strandFlow2 {
        0%, 100% { transform: rotate(0deg) translateY(0); }
        50% { transform: rotate(-3deg) translateY(6px); }
    }

    @keyframes strandFlow3 {
        0%, 100% { transform: rotate(15deg) translateY(0); }
        50% { transform: rotate(18deg) translateY(4px); }
    }

    @keyframes skirtLayer1 {
        0%, 100% { height: 80px; }
        50% { height: 85px; }
    }

    @keyframes skirtLayer2 {
        0%, 100% { height: 60px; }
        50% { height: 65px; }
    }

    @keyframes wingFlapLeft {
        0%, 100% { transform: rotateY(180deg) rotateZ(0deg); }
        50% { transform: rotateY(180deg) rotateZ(20deg); }
    }

    @keyframes wingFlapRight {
        0%, 100% { transform: rotateZ(0deg); }
        50% { transform: rotateZ(-20deg); }
    }

    @keyframes armFlowLeft {
        0%, 100% { transform: rotate(0deg); }
        50% { transform: rotate(-15deg); }
    }

    @keyframes armFlowRight {
        0%, 100% { transform: rotate(0deg); }
        50% { transform: rotate(15deg); }
    }

    @keyframes fairyGlowPulse {
        0%, 100% { opacity: 0.3; transform: translate(-50%, -50%) scale(1); }
        50% { opacity: 0.6; transform: translate(-50%, -50%) scale(1.15); }
    }

    /* ===== –¶–í–ï–¢–û–ß–ù–´–ô –î–û–ñ–î–¨ (–¢–û–õ–¨–ö–û –î–õ–Ø –î–ï–°–ö–¢–û–ü–ê) ===== */
    @media (min-width: 769px) {
        .flower-rain {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 0;
        }
    }

    /* ===== –í–û–õ–®–ï–ë–ù–´–ï –ß–ê–°–¢–ò–¶–´ ===== */
    .magic-particles {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        width: 400px;
        height: 400px;
    }

    .particle {
        position: absolute;
        width: 6px;
        height: 6px;
        background: rgba(236, 72, 153, 0.7);
        border-radius: 50%;
        animation: magicParticleFloat 4s ease-out infinite;
        filter: blur(1px);
    }

    .p1 { top: 10%; left: 20%; animation-delay: 0s; }
    .p2 { top: 30%; right: 15%; animation-delay: 0.5s; }
    .p3 { bottom: 40%; left: 10%; animation-delay: 1s; }
    .p4 { bottom: 20%; right: 25%; animation-delay: 1.5s; }
    .p5 { top: 60%; left: 40%; animation-delay: 2s; }
    .p6 { top: 15%; right: 35%; animation-delay: 2.5s; }
    .p7 { bottom: 30%; left: 60%; animation-delay: 3s; }
    .p8 { top: 45%; right: 5%; animation-delay: 3.5s; }

    @keyframes magicParticleFloat {
        0% {
            opacity: 0;
            transform: translate(0, 0) scale(0);
        }
        20% {
            opacity: 0.8;
        }
        80% {
            opacity: 0.8;
        }
        100% {
            opacity: 0;
            transform: translate(var(--tx, 100px), var(--ty, -150px)) scale(1);
        }
    }

    /* ===== –ü–õ–ê–í–ê–Æ–©–ò–ï –°–ï–†–î–¶–ê (–¢–û–õ–¨–ö–û –î–õ–Ø –î–ï–°–ö–¢–û–ü–ê) ===== */
    @media (min-width: 769px) {
        .floating-hearts {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 0;
        }

        .floating-hearts .heart {
            position: absolute;
            font-size: 28px;
            opacity: 0;
            filter: drop-shadow(0 2px 8px rgba(219, 39, 119, 0.3));
            animation: heartFloat 12s ease-in infinite;
        }

        .h1 { top: 15%; left: 5%; animation-delay: 1s; }
        .h2 { top: 25%; right: 10%; animation-delay: 3s; }
        .h3 { bottom: 35%; left: 15%; animation-delay: 5s; }
        .h4 { bottom: 20%; right: 5%; animation-delay: 7s; }

        @keyframes heartFloat {
            0% {
                opacity: 0;
                transform: translateY(100px) rotate(0deg) scale(0.5);
            }
            20% {
                opacity: 0.6;
            }
            80% {
                opacity: 0.6;
            }
            100% {
                opacity: 0;
                transform: translateY(-100px) rotate(360deg) scale(1);
            }
        }
    }

    /* ===== –û–°–ù–û–í–ù–û–ï –°–û–î–ï–†–ñ–ò–ú–û–ï ===== */
    .confirmation-content {
        position: relative;
        z-index: 20;
        width: 100%;
        max-width: 500px;
        animation: contentAppear 1s 2.5s ease-out forwards;
        opacity: 0;
        transform: translateY(20px);
    }

    .confirmation-card {
        background: rgba(255, 255, 255, 0.96);
        border-radius: 28px;
        padding: 40px 35px;
        box-shadow:
            0 25px 50px rgba(0, 0, 0, 0.1),
            0 15px 30px rgba(0, 0, 0, 0.06),
            inset 0 1px 0 rgba(255, 255, 255, 0.6);
        border: 2px solid rgba(236, 72, 153, 0.15);
        backdrop-filter: blur(12px);
        text-align: center;
    }

    /* –ó–∞–≥–æ–ª–æ–≤–æ–∫ —Å –≥–∞–ª–æ—á–∫–æ–π */
    .confirmation-header {
        margin-bottom: 35px;
        position: relative;
    }

    .checkmark-container {
        position: relative;
        margin-bottom: 25px;
    }

    .checkmark-circle {
        position: relative;
        width: 90px;
        height: 90px;
        margin: 0 auto;
    }

    .checkmark {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        width: 70px;
        height: 70px;
        background: linear-gradient(135deg, #10B981 0%, #34D399 100%);
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        color: white;
        font-size: 32px;
        font-weight: bold;
        box-shadow:
            0 15px 30px rgba(16, 185, 129, 0.25),
            inset 0 2px 0 rgba(255, 255, 255, 0.4);
        z-index: 3;
        animation: checkmarkPop 0.8s 2s cubic-bezier(0.68, -0.55, 0.265, 1.55) both;
    }

    .checkmark-glow {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        width: 100px;
        height: 100px;
        background: radial-gradient(circle,
            rgba(16, 185, 129, 0.4) 0%,
            rgba(16, 185, 129, 0.2) 50%,
            transparent 70%);
        border-radius: 50%;
        animation: checkmarkGlow 2s 2.5s ease-in-out infinite;
        filter: blur(12px);
        z-index: 2;
    }

    .checkmark-sparkles {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        width: 120px;
        height: 120px;
        z-index: 1;
    }

    .checkmark-sparkles .sparkle {
        position: absolute;
        font-size: 16px;
        opacity: 0;
        animation: checkmarkSparkle 2s 2.8s ease-out infinite;
    }

    .s1 { top: 0; left: 50%; animation-delay: 0s; }
    .s2 { top: 50%; right: 0; animation-delay: 0.2s; }
    .s3 { bottom: 0; left: 50%; animation-delay: 0.4s; }

    .confirmation-title {
        font-size: 2.5rem;
        color: transparent;
        font-weight: 800;
        margin-bottom: 10px;
        background: linear-gradient(135deg, #7C3AED 0%, #EC4899 50%, #F59E0B 100%);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
        text-shadow: 0 2px 20px rgba(124, 58, 237, 0.15);
    }

    .confirmation-subtitle {
        font-size: 1.2rem;
        color: #64748B;
        font-weight: 500;
        letter-spacing: 0.5px;
    }

    /* –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∑–∞–∫–∞–∑–µ */
    .order-summary {
        background: linear-gradient(135deg,
            rgba(255, 241, 242, 0.85) 0%,
            rgba(253, 242, 248, 0.85) 100%);
        border-radius: 20px;
        padding: 25px;
        margin-bottom: 30px;
        border: 2px solid rgba(236, 72, 153, 0.12);
        position: relative;
        overflow: hidden;
    }

    .order-summary::before {
        content: '';
        position: absolute;
        top: -50%;
        left: -50%;
        width: 200%;
        height: 200%;
        background: radial-gradient(circle,
            rgba(236, 72, 153, 0.08) 0%,
            transparent 70%);
        opacity: 0;
        animation: summaryGlow 4s ease-in-out infinite;
    }

    .summary-item {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 14px 0;
        border-bottom: 1px solid rgba(236, 72, 153, 0.1);
        position: relative;
        z-index: 1;
    }

    .summary-item:last-child {
        border-bottom: none;
    }

    .summary-item.highlight {
        background: rgba(255, 255, 255, 0.7);
        border-radius: 16px;
        padding: 20px;
        margin-top: 15px;
        border: 2px solid rgba(236, 72, 153, 0.18);
    }

    .total-amount-container {
        flex: 1;
    }

    .summary-label {
        color: #64748B;
        font-size: 1rem;
        font-weight: 600;
        display: block;
        margin-bottom: 5px;
    }

    .summary-value {
        color: #1E293B;
        font-weight: 600;
        font-size: 1.1rem;
    }

    .order-id {
        color: #7C3AED;
        font-size: 1.3rem;
        font-weight: 700;
        font-family: 'Courier New', monospace;
    }

    .total-price {
        font-size: 2.2rem;
        color: #7C3AED;
        font-weight: 800;
        text-shadow: 0 2px 15px rgba(124, 58, 237, 0.2);
        transition: all 0.5s cubic-bezier(0.34, 1.56, 0.64, 1);
        display: block;
        margin-top: 5px;
    }

    .price-effect {
        position: absolute;
        top: 50%;
        right: 20px;
        transform: translateY(-50%);
        width: 60px;
        height: 60px;
    }

    .price-sparkle {
        position: absolute;
        font-size: 20px;
        opacity: 0;
        animation: priceSparkleFloat 3s ease-in-out infinite;
    }

    .ps1 {
        top: 0;
        right: 0;
        animation-delay: 0s;
    }

    .ps2 {
        bottom: 0;
        left: 0;
        animation-delay: 1.5s;
    }

    /* –ë–ª–∞–≥–æ–¥–∞—Ä—Å—Ç–≤–µ–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ */
    .thank-you-message {
        display: flex;
        align-items: center;
        gap: 20px;
        padding: 25px;
        background: linear-gradient(135deg,
            rgba(254, 226, 226, 0.7) 0%,
            rgba(253, 242, 248, 0.7) 100%);
        border-radius: 20px;
        margin-bottom: 35px;
        border: 2px solid rgba(236, 72, 153, 0.12);
        backdrop-filter: blur(5px);
    }

    .message-icon {
        font-size: 40px;
        flex-shrink: 0;
        animation: messageIconFloat 2.5s ease-in-out infinite;
        filter: drop-shadow(0 2px 8px rgba(245, 158, 11, 0.2));
    }

    .message-content {
        text-align: left;
        flex: 1;
    }

    .message-title {
        color: #1E293B;
        font-weight: 700;
        font-size: 1.2rem;
        margin-bottom: 8px;
    }

    .message-text {
        color: #64748B;
        font-size: 0.95rem;
        line-height: 1.5;
    }

    /* –ö–Ω–æ–ø–∫–∏ –¥–µ–π—Å—Ç–≤–∏–π */
    .action-buttons {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 18px;
        margin-bottom: 30px;
    }

    .action-btn {
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 12px;
        padding: 18px 24px;
        border-radius: 18px;
        font-size: 1rem;
        font-weight: 600;
        text-decoration: none;
        transition: all 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
        border: 2px solid transparent;
        position: relative;
        overflow: hidden;
        height: 60px;
        backdrop-filter: blur(5px);
    }

    .action-btn::before {
        content: '';
        position: absolute;
        top: 0;
        left: -100%;
        width: 100%;
        height: 100%;
        background: linear-gradient(90deg,
            transparent,
            rgba(255, 255, 255, 0.5),
            transparent);
        transition: 0.6s;
    }

    .action-btn:hover::before {
        left: 100%;
    }

    /* –ö–Ω–æ–ø–∫–∞ "–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å –ø–æ–∫—É–ø–∫–∏" */
    .continue-shopping {
        background: linear-gradient(135deg, #EC4899 0%, #DB2777 100%);
        color: white;
        box-shadow:
            0 8px 20px rgba(236, 72, 153, 0.3),
            inset 0 2px 0 rgba(255, 255, 255, 0.3);
        border-color: rgba(255, 255, 255, 0.25);
    }

    .continue-shopping:hover {
        transform: translateY(-4px) scale(1.02);
        box-shadow:
            0 12px 30px rgba(236, 72, 153, 0.4),
            inset 0 2px 0 rgba(255, 255, 255, 0.3);
        background: linear-gradient(135deg, #DB2777 0%, #BE185D 100%);
    }

    /* –ö–Ω–æ–ø–∫–∞ "–ù–∞ –≥–ª–∞–≤–Ω—É—é" */
    .go-home {
        background: linear-gradient(135deg, #8B5CF6 0%, #7C3AED 100%);
        color: white;
        box-shadow:
            0 8px 20px rgba(139, 92, 246, 0.3),
            inset 0 2px 0 rgba(255, 255, 255, 0.3);
        border-color: rgba(255, 255, 255, 0.25);
    }

    .go-home:hover {
        transform: translateY(-4px) scale(1.02);
        box-shadow:
            0 12px 30px rgba(139, 92, 246, 0.4),
            inset 0 2px 0 rgba(255, 255, 255, 0.3);
        background: linear-gradient(135deg, #7C3AED 0%, #6D28D9 100%);
    }

    .btn-icon {
        font-size: 1.2rem;
        transition: transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
    }

    .action-btn:hover .btn-icon {
        transform: scale(1.2) rotate(5deg);
    }

    .btn-arrow {
        font-size: 1.1rem;
        opacity: 0.8;
        transition: all 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
    }

    .action-btn:hover .btn-arrow {
        transform: translateX(8px);
        opacity: 1;
    }

    /* –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è */
    .additional-info {
        padding-top: 25px;
        border-top: 2px solid rgba(236, 72, 153, 0.1);
    }

    .info-item {
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 12px;
        padding: 12px 20px;
        background: rgba(255, 255, 255, 0.6);
        border-radius: 14px;
        border: 1px solid rgba(236, 72, 153, 0.1);
    }

    .info-icon {
        font-size: 1.3rem;
        color: #EC4899;
    }

    .info-text {
        color: #64748B;
        font-size: 0.95rem;
        font-weight: 500;
    }

    /* –ê–Ω–∏–º–∞—Ü–∏–∏ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ */
    @keyframes contentAppear {
        0% { opacity: 0; transform: translateY(30px); }
        100% { opacity: 1; transform: translateY(0); }
    }

    @keyframes checkmarkPop {
        0% {
            transform: translate(-50%, -50%) scale(0) rotate(-180deg);
            box-shadow: 0 0 0 rgba(16, 185, 129, 0);
        }
        70% {
            transform: translate(-50%, -50%) scale(1.3) rotate(15deg);
            box-shadow: 0 20px 40px rgba(16, 185, 129, 0.3);
        }
        100% {
            transform: translate(-50%, -50%) scale(1) rotate(0deg);
            box-shadow: 0 15px 30px rgba(16, 185, 129, 0.25);
        }
    }

    @keyframes checkmarkGlow {
        0%, 100% {
            opacity: 0.4;
            transform: translate(-50%, -50%) scale(1);
        }
        50% {
            opacity: 0.8;
            transform: translate(-50%, -50%) scale(1.3);
        }
    }

    @keyframes checkmarkSparkle {
        0% { opacity: 0; transform: translate(-50%, -50%) scale(0) rotate(0deg); }
        30% { opacity: 1; transform: translate(-50%, -50%) scale(1.2) rotate(180deg); }
        70% { opacity: 1; transform: translate(-50%, -50%) scale(1) rotate(360deg); }
        100% { opacity: 0; transform: translate(-50%, -50%) scale(0) rotate(540deg); }
    }

    @keyframes summaryGlow {
        0%, 100% { opacity: 0; transform: scale(0.5); }
        50% { opacity: 1; transform: scale(1); }
    }

    @keyframes priceSparkleFloat {
        0%, 100% {
            opacity: 0;
            transform: translateY(0) rotate(0deg) scale(0.5);
        }
        50% {
            opacity: 1;
            transform: translateY(-10px) rotate(180deg) scale(1.2);
        }
    }

    @keyframes messageIconFloat {
        0%, 100% { transform: translateY(0) rotate(0deg) scale(1); }
        50% { transform: translateY(-8px) rotate(15deg) scale(1.1); }
    }

    /* ===== –ê–î–ê–ü–¢–ê–¶–ò–Ø –î–õ–Ø –ú–û–ë–ò–õ–¨–ù–´–• ===== */
    @media (max-width: 768px) {
        .order-confirmation-page {
            padding: 16px;
            background: linear-gradient(135deg,
                rgba(255, 245, 248, 0.98) 0%,
                rgba(255, 240, 245, 0.95) 100%);
        }

        /* –°–∫—Ä—ã–≤–∞–µ–º —Å–ª–æ–∂–Ω—ã–µ –∞–Ω–∏–º–∞—Ü–∏–∏ –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö */
        .elegant-fairy,
        .flower-rain,
        .floating-hearts,
        .fairy-trail {
            display: none;
        }

        /* –£–ø—Ä–æ—â–µ–Ω–Ω—ã–µ —á–∞—Å—Ç–∏—Ü—ã */
        .magic-particles {
            width: 200px;
            height: 200px;
        }

        .particle {
            width: 4px;
            height: 4px;
            background: rgba(236, 72, 153, 0.5);
        }

        /* –£–ø—Ä–æ—â–µ–Ω–Ω—ã–π –∫–æ–Ω—Ç–µ–Ω—Ç */
        .confirmation-card {
            padding: 30px 20px;
            border-radius: 24px;
            backdrop-filter: blur(8px);
        }

        .checkmark-circle {
            width: 70px;
            height: 70px;
        }

        .checkmark {
            width: 55px;
            height: 55px;
            font-size: 26px;
        }

        .checkmark-glow {
            width: 80px;
            height: 80px;
        }

        .checkmark-sparkles {
            display: none;
        }

        .confirmation-title {
            font-size: 1.8rem;
        }

        .confirmation-subtitle {
            font-size: 1rem;
        }

        .order-summary {
            padding: 20px;
            border-radius: 18px;
        }

        .summary-item.highlight {
            padding: 16px;
        }

        .total-price {
            font-size: 1.8rem;
        }

        .price-effect {
            display: none;
        }

        .action-buttons {
            grid-template-columns: 1fr;
            gap: 12px;
        }

        .action-btn {
            padding: 16px 20px;
            height: 56px;
            border-radius: 16px;
        }

        .thank-you-message {
            padding: 20px;
            border-radius: 18px;
            gap: 15px;
        }

        .message-icon {
            font-size: 32px;
        }

        .message-title {
            font-size: 1.1rem;
        }

        .message-text {
            font-size: 0.9rem;
        }

        .additional-info {
            padding-top: 20px;
        }

        .info-item {
            padding: 10px 16px;
            border-radius: 12px;
        }

        .info-text {
            font-size: 0.85rem;
        }
    }

    @media (max-width: 480px) {
        .confirmation-card {
            padding: 25px 16px;
            border-radius: 20px;
        }

        .checkmark-circle {
            width: 60px;
            height: 60px;
        }

        .checkmark {
            width: 48px;
            height: 48px;
            font-size: 22px;
        }

        .confirmation-title {
            font-size: 1.6rem;
        }

        .order-summary {
            padding: 16px;
        }

        .summary-item {
            flex-direction: column;
            align-items: flex-start;
            gap: 5px;
            padding: 12px 0;
        }

        .summary-item.highlight {
            padding: 14px;
        }

        .total-price {
            font-size: 1.6rem;
        }

        .action-btn {
            padding: 14px 18px;
            height: 52px;
            font-size: 0.95rem;
        }

        .message-icon {
            font-size: 28px;
        }

        .magic-particles {
            display: none;
        }
    }

    /* –û—Ç–∫–ª—é—á–µ–Ω–∏–µ –∞–Ω–∏–º–∞—Ü–∏–π –ø—Ä–∏ prefer-reduced-motion */
    @media (prefers-reduced-motion: reduce) {
        * {
            animation-duration: 0.01ms !important;
            animation-iteration-count: 1 !important;
            transition-duration: 0.01ms !important;
        }

        .animation-background,
        .magic-particles,
        .checkmark-glow,
        .checkmark-sparkles,
        .price-effect {
            display: none;
        }
    }
</style>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        const isDesktop = window.innerWidth > 768;

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∞–Ω–∏–º–∞—Ü–∏–∏
        setTimeout(() => {
            initAnimations();

            if (isDesktop) {
                createFlowerRain();
                initFairyInteraction();
            }
        }, 100);

        function initAnimations() {
            // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —á–∞—Å—Ç–∏—Ü
            initParticles();

            // –ê–Ω–∏–º–∞—Ü–∏—è —Ñ–µ–∏ –∫ –≥–∞–ª–æ—á–∫–µ (—Ç–æ–ª—å–∫–æ –¥–ª—è –¥–µ—Å–∫—Ç–æ–ø–∞)
            if (isDesktop) {
                setTimeout(() => {
                    animateFairyToCheckmark();
                }, 3000);
            }

            // –ê–Ω–∏–º–∞—Ü–∏—è –ø—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–∏–∏ –Ω–∞ —ç–ª–µ–º–µ–Ω—Ç—ã
            setupInteractions();
        }

        function initParticles() {
            const particles = document.querySelectorAll('.particle');
            particles.forEach((particle, index) => {
                const distance = 150 + Math.random() * 100;
                const angle = (index / particles.length) * Math.PI * 2;
                const tx = Math.cos(angle) * distance;
                const ty = Math.sin(angle) * distance;

                particle.style.setProperty('--tx', `${tx}px`);
                particle.style.setProperty('--ty', `${ty}px`);

                // –†–∞–∑–Ω–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —á–∞—Å—Ç–∏—Ü
                const duration = 3 + Math.random() * 3;
                particle.style.animationDuration = `${duration}s`;
            });
        }

        function createFlowerRain() {
            const flowerRain = document.querySelector('.flower-rain');
            if (!flowerRain) return;

            const flowers = ['üå∏', 'üå∫', 'üåº', 'üå∑', 'üíê', 'üåπ', 'üåª', 'ü•Ä'];

            // –°–æ–∑–¥–∞–µ–º 15 —Ü–≤–µ—Ç–æ–≤ –¥–ª—è –¥–æ–∂–¥—è
            for (let i = 0; i < 15; i++) {
                setTimeout(() => {
                    const flower = document.createElement('div');
                    const randomFlower = flowers[Math.floor(Math.random() * flowers.length)];
                    const size = 20 + Math.random() * 20;
                    const left = Math.random() * 100;
                    const duration = 5 + Math.random() * 5;
                    const delay = Math.random() * 3;

                    flower.textContent = randomFlower;
                    flower.style.cssText = `
                        position: absolute;
                        top: -50px;
                        left: ${left}%;
                        font-size: ${size}px;
                        opacity: 0;
                        filter: drop-shadow(0 4px 12px rgba(0, 0, 0, 0.1));
                        animation: flowerDrop ${duration}s ${delay}s linear infinite;
                    `;

                    flowerRain.appendChild(flower);
                }, i * 300);
            }

            // –î–æ–±–∞–≤–ª—è–µ–º –∞–Ω–∏–º–∞—Ü–∏—é –ø–∞–¥–µ–Ω–∏—è
            const style = document.createElement('style');
            style.textContent = `
                @keyframes flowerDrop {
                    0% {
                        opacity: 0;
                        transform: translateY(-100px) rotate(0deg) scale(0.5);
                    }
                    10% {
                        opacity: 0.7;
                    }
                    90% {
                        opacity: 0.7;
                    }
                    100% {
                        opacity: 0;
                        transform: translateY(100vh) rotate(360deg) scale(1);
                    }
                }
            `;
            document.head.appendChild(style);
        }

        function animateFairyToCheckmark() {
            const fairy = document.querySelector('.elegant-fairy');
            const checkmark = document.querySelector('.checkmark-circle');
            if (!fairy || !checkmark) return;

            const checkmarkRect = checkmark.getBoundingClientRect();
            const checkmarkCenterX = checkmarkRect.left + checkmarkRect.width / 2;
            const checkmarkCenterY = checkmarkRect.top + checkmarkRect.height / 2;
            const windowCenterX = window.innerWidth / 2;

            // –ê–Ω–∏–º–∞—Ü–∏—è –ø–µ—Ä–µ–ª–µ—Ç–∞ —Ñ–µ–∏ –∫ –≥–∞–ª–æ—á–∫–µ
            fairy.style.animation = 'none';

            requestAnimationFrame(() => {
                fairy.style.transition = 'all 1.8s cubic-bezier(0.34, 1.56, 0.64, 1)';
                fairy.style.left = `${checkmarkCenterX}px`;
                fairy.style.top = `${checkmarkCenterY}px`;
                fairy.style.transform = 'translate(-50%, -50%) scale(0.4)';
                fairy.style.opacity = '0.6';
                fairy.style.zIndex = '25';

                // –ü–æ—Å–ª–µ –ø–µ—Ä–µ–ª–µ—Ç–∞ —Å–æ–∑–¥–∞–µ–º –≤–æ–ª—à–µ–±–Ω—ã–π —ç—Ñ—Ñ–µ–∫—Ç
                setTimeout(() => {
                    createMagicFlowerEffect(checkmarkCenterX, checkmarkCenterY);

                    // –§–µ—è —É–ª–µ—Ç–∞–µ—Ç –æ–±—Ä–∞—Ç–Ω–æ –∫ —Ü–µ–Ω—Ç—Ä—É
                    setTimeout(() => {
                        fairy.style.transition = 'all 1.2s cubic-bezier(0.34, 1.56, 0.64, 1)';
                        fairy.style.left = `${windowCenterX}px`;
                        fairy.style.top = '50%';
                        fairy.style.transform = 'translate(-50%, -50%) scale(1)';
                        fairy.style.opacity = '1';

                        // –í–æ–∑–≤—Ä–∞—â–∞–µ–º –∞–Ω–∏–º–∞—Ü–∏—é
                        setTimeout(() => {
                            fairy.style.transition = 'none';
                            fairy.style.animation = 'fairyGracefulFloat 6s ease-in-out infinite';
                            fairy.style.zIndex = '10';
                        }, 1200);
                    }, 1000);
                }, 1800);
            });
        }

        function createMagicFlowerEffect(x, y) {
            // –°–æ–∑–¥–∞–µ–º –≤–æ–ª—à–µ–±–Ω—ã–π —Ü–≤–µ—Ç–æ–∫ –Ω–∞ –≥–∞–ª–æ—á–∫–µ
            const flower = document.createElement('div');
            flower.innerHTML = 'üå∏';
            flower.style.cssText = `
                position: fixed;
                top: ${y}px;
                left: ${x}px;
                font-size: 40px;
                transform: translate(-50%, -50%) scale(0);
                pointer-events: none;
                z-index: 100;
                opacity: 0;
                filter: drop-shadow(0 0 15px rgba(236, 72, 153, 0.5));
                animation: magicFlowerBloom 1.5s ease-out forwards;
            `;

            document.body.appendChild(flower);

            // –°–æ–∑–¥–∞–µ–º –∞–Ω–∏–º–∞—Ü–∏—é
            const style = document.createElement('style');
            style.textContent = `
                @keyframes magicFlowerBloom {
                    0% {
                        opacity: 0;
                        transform: translate(-50%, -50%) scale(0) rotate(0deg);
                        filter: drop-shadow(0 0 0 rgba(236, 72, 153, 0));
                    }
                    30% {
                        opacity: 1;
                        transform: translate(-50%, -50%) scale(1.3) rotate(0deg);
                        filter: drop-shadow(0 0 20px rgba(236, 72, 153, 0.6));
                    }
                    70% {
                        opacity: 0.8;
                        transform: translate(-50%, -50%) scale(1) rotate(180deg);
                        filter: drop-shadow(0 0 15px rgba(236, 72, 153, 0.4));
                    }
                    100% {
                        opacity: 0;
                        transform: translate(-50%, -50%) scale(0.5) rotate(360deg);
                        filter: drop-shadow(0 0 5px rgba(236, 72, 153, 0.2));
                    }
                }
            `;
            document.head.appendChild(style);

            // –£–¥–∞–ª—è–µ–º —ç–ª–µ–º–µ–Ω—Ç—ã —á–µ—Ä–µ–∑ 2 —Å–µ–∫—É–Ω–¥—ã
            setTimeout(() => {
                if (flower.parentNode) {
                    flower.parentNode.removeChild(flower);
                }
                if (style.parentNode) {
                    style.parentNode.removeChild(style);
                }
            }, 2000);
        }

        function initFairyInteraction() {
            const fairy = document.querySelector('.elegant-fairy');
            if (!fairy) return;

            // –§–µ—è —Å–ª–µ–¥–∏—Ç –∑–∞ –∫—É—Ä—Å–æ—Ä–æ–º –≥–ª–∞–∑–∞–º–∏
            document.addEventListener('mousemove', (e) => {
                const mouseX = e.clientX;
                const mouseY = e.clientY;

                const fairyRect = fairy.getBoundingClientRect();
                const fairyCenterX = fairyRect.left + fairyRect.width / 2;
                const fairyCenterY = fairyRect.top + fairyRect.height / 3;

                const deltaX = (mouseX - fairyCenterX) / 100;
                const deltaY = (mouseY - fairyCenterY) / 100;

                const pupils = fairy.querySelectorAll('.pupil');
                pupils.forEach(pupil => {
                    pupil.style.transform = `translate(calc(-50% + ${deltaX}px), calc(-50% + ${deltaY}px))`;
                });

                // –õ–µ–≥–∫–æ–µ –¥–≤–∏–∂–µ–Ω–∏–µ –≤—Å–µ–π —Ñ–µ–∏
                const moveX = (mouseX - window.innerWidth / 2) / 50;
                const moveY = (mouseY - window.innerHeight / 2) / 50;

                fairy.style.transform = `translate(calc(-50% + ${moveX}px), calc(-50% + ${moveY}px))`;
            });

            // –†–µ–∞–∫—Ü–∏—è –Ω–∞ –∫–ª–∏–∫ –ø–æ —Ñ–µ–µ
            fairy.addEventListener('click', (e) => {
                e.stopPropagation();
                createFairySparkleEffect(e.clientX, e.clientY);
            });
        }

        function createFairySparkleEffect(x, y) {
            // –°–æ–∑–¥–∞–µ–º —ç—Ñ—Ñ–µ–∫—Ç –∏—Å–∫—Ä –ø—Ä–∏ –∫–ª–∏–∫–µ –Ω–∞ —Ñ–µ—é
            for (let i = 0; i < 8; i++) {
                setTimeout(() => {
                    const spark = document.createElement('div');
                    spark.innerHTML = '‚ú®';
                    const size = 12 + Math.random() * 16;
                    const angle = (i / 8) * Math.PI * 2;
                    const distance = 60 + Math.random() * 40;

                    spark.style.cssText = `
                        position: fixed;
                        top: ${y}px;
                        left: ${x}px;
                        font-size: ${size}px;
                        transform: translate(-50%, -50%) scale(0);
                        pointer-events: none;
                        z-index: 50;
                        opacity: 0;
                        animation: sparkleBurst 1s ease-out forwards;
                    `;

                    document.body.appendChild(spark);

                    // –ê–Ω–∏–º–∞—Ü–∏—è
                    const style = document.createElement('style');
                    style.textContent = `
                        @keyframes sparkleBurst {
                            0% {
                                opacity: 0;
                                transform: translate(-50%, -50%) scale(0) rotate(0deg);
                            }
                            30% {
                                opacity: 1;
                                transform: translate(
                                    calc(-50% + ${Math.cos(angle) * distance * 0.5}px),
                                    calc(-50% + ${Math.sin(angle) * distance * 0.5}px)
                                ) scale(1.2) rotate(180deg);
                            }
                            100% {
                                opacity: 0;
                                transform: translate(
                                    calc(-50% + ${Math.cos(angle) * distance}px),
                                    calc(-50% + ${Math.sin(angle) * distance}px)
                                ) scale(0) rotate(360deg);
                            }
                        }
                    `;
                    document.head.appendChild(style);

                    setTimeout(() => {
                        if (spark.parentNode) {
                            spark.parentNode.removeChild(spark);
                        }
                        if (style.parentNode) {
                            style.parentNode.removeChild(style);
                        }
                    }, 1000);
                }, i * 100);
            }
        }

        function setupInteractions() {
            // –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –∫–Ω–æ–ø–æ–∫
            const actionButtons = document.querySelectorAll('.action-btn');
            actionButtons.forEach(btn => {
                btn.addEventListener('mouseenter', function() {
                    if (isDesktop) {
                        this.style.transform = 'translateY(-4px) scale(1.02)';
                    }
                });

                btn.addEventListener('mouseleave', function() {
                    if (isDesktop) {
                        this.style.transform = 'translateY(0) scale(1)';
                    }
                });

                btn.addEventListener('click', function() {
                    this.style.transform = 'translateY(0) scale(0.98)';
                    setTimeout(() => {
                        this.style.transform = 'translateY(0) scale(1)';
                    }, 150);
                });
            });

            // –ê–Ω–∏–º–∞—Ü–∏—è –ø—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–∏–∏ –Ω–∞ –∏—Ç–æ–≥–æ–≤—É—é —Å—É–º–º—É
            const totalPrice = document.querySelector('.total-price');
            if (totalPrice) {
                totalPrice.addEventListener('mouseenter', function() {
                    if (isDesktop) {
                        this.style.transform = 'scale(1.05)';
                        this.style.textShadow = '0 0 25px rgba(124, 58, 237, 0.3)';
                        this.style.color = '#EC4899';
                    }
                });

                totalPrice.addEventListener('mouseleave', function() {
                    if (isDesktop) {
                        this.style.transform = 'scale(1)';
                        this.style.textShadow = '0 2px 15px rgba(124, 58, 237, 0.2)';
                        this.style.color = '#7C3AED';
                    }
                });
            }

            // –ê–Ω–∏–º–∞—Ü–∏—è –Ω–æ–º–µ—Ä–∞ –∑–∞–∫–∞–∑–∞
            const orderId = document.querySelector('.order-id');
            if (orderId) {
                orderId.addEventListener('mouseenter', function() {
                    if (isDesktop) {
                        this.style.transform = 'scale(1.05)';
                        this.style.letterSpacing = '1px';
                    }
                });

                orderId.addEventListener('mouseleave', function() {
                    if (isDesktop) {
                        this.style.transform = 'scale(1)';
                        this.style.letterSpacing = 'normal';
                    }
                });
            }
        }
    });
</script>
{% endblock %}