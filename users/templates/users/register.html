<!-- users/templates/users/register.html -->
{% extends "base.html" %}

{% block title %}–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è{% endblock %}

{% block content %}
<div class="register-page-wrapper">

    <div class="register-card fade-in">

        <!-- –õ–ï–í–ê–Ø –ß–ê–°–¢–¨: –ò–ú–ò–î–ñ–ï–í–ê–Ø -->
        <div class="register-visual">
            <div class="visual-content">
                <h2>–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ –º–∏—Ä —Ü–≤–µ—Ç–æ–≤!</h2>
                <p>–°–æ–∑–¥–∞–π—Ç–µ –∞–∫–∫–∞—É–Ω—Ç, —á—Ç–æ–±—ã –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å –∑–∞–∫–∞–∑—ã, —Å–æ—Ö—Ä–∞–Ω—è—Ç—å –∞–¥—Ä–µ—Å–∞ –∏ –ø–æ–ª—É—á–∞—Ç—å –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ —Å–∫–∏–¥–∫–∏.</p>
            </div>
            <!-- –î–µ–∫–æ—Ä–∞—Ç–∏–≤–Ω—ã–µ –∫—Ä—É–≥–∏ -->
            <div class="circle c1"></div>
            <div class="circle c2"></div>
        </div>

        <!-- –ü–†–ê–í–ê–Ø –ß–ê–°–¢–¨: –§–û–†–ú–ê -->
        <div class="register-form-container">
            <h1 class="form-title">–°–æ–∑–¥–∞–Ω–∏–µ –∞–∫–∫–∞—É–Ω—Ç–∞</h1>
            <p class="form-subtitle">–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏</p>

            <form method="post" class="modern-form">
                {% csrf_token %}

                <!-- –û—à–∏–±–∫–∏ -->
                {% if form.non_field_errors %}
                    <div class="form-error-alert">
                        {% for error in form.non_field_errors %}
                            <p>{{ error }}</p>
                        {% endfor %}
                    </div>
                {% endif %}

                <!-- –ü–æ–ª–µ: –ò–º—è -->
                <div class="input-group">
                    <label>–í–∞—à–µ –∏–º—è</label>
                    <div class="input-wrapper">
                        <span class="input-icon">üë§</span>
                        {{ form.first_name }}
                    </div>
                    {% if form.first_name.errors %}<div class="field-error">{{ form.first_name.errors }}</div>{% endif %}
                </div>

                <!-- –ü–æ–ª–µ: –¢–µ–ª–µ—Ñ–æ–Ω -->
                <div class="input-group">
                    <label>–ù–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞</label>
                    <div class="input-wrapper">
                        <span class="input-icon">üìû</span>
                        {{ form.phone }}
                    </div>
                    <small class="help-text">{{ form.phone.help_text }}</small>
                    {% if form.phone.errors %}<div class="field-error">{{ form.phone.errors }}</div>{% endif %}
                </div>

                <!-- –ü–æ–ª–µ: Email -->
                <div class="input-group">
                    <label>Email <span class="optional">(–Ω–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)</span></label>
                    <div class="input-wrapper">
                        <span class="input-icon">‚úâÔ∏è</span>
                        {{ form.email }}
                    </div>
                    <small class="help-text">–î–ª—è —á–µ–∫–æ–≤ –∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –ø–∞—Ä–æ–ª—è</small>
                    {% if form.email.errors %}<div class="field-error">{{ form.email.errors }}</div>{% endif %}
                </div>

                <!-- –ü–æ–ª—è: –ü–∞—Ä–æ–ª–∏ (–≤ —Ä—è–¥) -->
                <div class="password-row">
                    <div class="input-group">
                        <label>–ü–∞—Ä–æ–ª—å</label>
                        <div class="input-wrapper">
                            <span class="input-icon">üîí</span>
                            {{ form.password }}
                        </div>
                        {% if form.password.errors %}<div class="field-error">{{ form.password.errors }}</div>{% endif %}
                    </div>

                    <div class="input-group">
                        <label>–ü–æ–≤—Ç–æ—Ä–∏—Ç–µ –ø–∞—Ä–æ–ª—å</label>
                        <div class="input-wrapper">
                            <span class="input-icon">üîë</span>
                            {{ form.password2 }}
                        </div>
                        {% if form.password2.errors %}<div class="field-error">{{ form.password2.errors }}</div>{% endif %}
                    </div>
                </div>

                <!-- –ö–Ω–æ–ø–∫–∞ -->
                <button type="submit" class="btn btn-primary btn-block register-btn">
                    –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è
                </button>

                <div class="form-footer">
                    <p>–£–∂–µ –µ—Å—Ç—å –∞–∫–∫–∞—É–Ω—Ç? <a href="{% url 'login' %}">–í–æ–π—Ç–∏</a></p>
                </div>
            </form>
        </div>
    </div>
</div>

<style>
    /* –ê–Ω–∏–º–∞—Ü–∏—è –ø–æ—è–≤–ª–µ–Ω–∏—è */
    @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
    .fade-in { animation: fadeIn 0.6s ease-out forwards; }

    /* –û–±–µ—Ä—Ç–∫–∞ –Ω–∞ –≤—Å—é —Å—Ç—Ä–∞–Ω–∏—Ü—É */
    .register-page-wrapper {
        display: flex; justify-content: center; align-items: center;
        min-height: 80vh; padding: 40px 20px;
        background-color: #f9f9f9;
        font-family: var(--default-font-family, sans-serif);
    }

    /* –ö–∞—Ä—Ç–æ—á–∫–∞ (—Ä–∞–∑–¥–µ–ª–µ–Ω–Ω–∞—è –Ω–∞ 2 —á–∞—Å—Ç–∏) */
    .register-card {
        display: flex;
        width: 100%; max-width: 900px;
        background: #fff;
        border-radius: 20px;
        box-shadow: 0 10px 40px rgba(0,0,0,0.08);
        overflow: hidden;
    }

    /* --- –õ–ï–í–ê–Ø –ß–ê–°–¢–¨ (–í–ò–ó–£–ê–õ) --- */
    .register-visual {
        flex: 1;
        background: linear-gradient(135deg, #ff9a9e 0%, #fecfef 100%);
        padding: 40px;
        display: flex; flex-direction: column; justify-content: center;
        color: #fff;
        position: relative;
        overflow: hidden;
    }
    .visual-content { position: relative; z-index: 2; }
    .register-visual h2 { font-size: 2.2rem; margin-bottom: 15px; text-shadow: 0 2px 5px rgba(0,0,0,0.1); line-height: 1.2; }
    .register-visual p { font-size: 1.1rem; opacity: 0.95; line-height: 1.6; }

    /* –î–µ–∫–æ—Ä (–∫—Ä—É–≥–∏) */
    .circle { position: absolute; border-radius: 50%; background: rgba(255,255,255,0.15); }
    .c1 { width: 200px; height: 200px; top: -50px; left: -50px; }
    .c2 { width: 300px; height: 300px; bottom: -100px; right: -50px; }

    /* --- –ü–†–ê–í–ê–Ø –ß–ê–°–¢–¨ (–§–û–†–ú–ê) --- */
    .register-form-container {
        flex: 1.2;
        padding: 50px;
    }
    .form-title { font-size: 1.8rem; margin: 0 0 10px 0; color: #333; }
    .form-subtitle { color: #888; margin-bottom: 30px; }

    .modern-form { display: flex; flex-direction: column; gap: 20px; }

    .input-group label { display: block; font-weight: 600; font-size: 0.9rem; margin-bottom: 8px; color: #555; }
    .input-wrapper {
        position: relative;
        display: flex; align-items: center;
    }
    .input-icon {
        position: absolute; left: 15px;
        font-size: 1.2rem; opacity: 0.5;
        pointer-events: none;
    }

    /* –°—Ç–∏–ª–∏ –ø–æ–ª–µ–π –≤–≤–æ–¥–∞ */
    .modern-form input {
        width: 100%;
        padding: 12px 15px 12px 45px; /* –û—Ç—Å—Ç—É–ø —Å–ª–µ–≤–∞ –ø–æ–¥ –∏–∫–æ–Ω–∫—É */
        border: 1px solid #ddd;
        border-radius: 8px;
        font-size: 1rem;
        transition: border-color 0.2s, box-shadow 0.2s;
        box-sizing: border-box; /* –í–∞–∂–Ω–æ –¥–ª—è —à–∏—Ä–∏–Ω—ã */
    }
    .modern-form input:focus {
        border-color: var(--accent-color, #e53935);
        outline: none;
        box-shadow: 0 0 0 3px rgba(229, 57, 53, 0.1);
    }

    .optional { font-weight: normal; color: #999; font-size: 0.85em; }
    .help-text { font-size: 0.8rem; color: #999; margin-top: 5px; display: block; }
    .field-error { color: #dc3545; font-size: 0.85rem; margin-top: 5px; }
    .form-error-alert { background: #ffebee; color: #c62828; padding: 10px; border-radius: 8px; }

    /* –ü–∞—Ä–æ–ª–∏ –≤ —Ä—è–¥ */
    .password-row { display: flex; gap: 20px; }
    .password-row .input-group { flex: 1; }

    /* –ö–Ω–æ–ø–∫–∞ */
    .register-btn {
        margin-top: 10px;
        padding: 15px;
        font-size: 1.1rem;
        border-radius: 10px;
        /* –¶–≤–µ—Ç–∞ –±–µ—Ä—É—Ç—Å—è –∏–∑ –≥–ª–æ–±–∞–ª—å–Ω–æ–≥–æ –∫–ª–∞—Å—Å–∞ btn-primary */
    }

    .form-footer { text-align: center; margin-top: 20px; font-size: 0.95rem; color: #666; }
    .form-footer a { color: var(--accent-color, #e53935); text-decoration: none; font-weight: 600; }
    .form-footer a:hover { text-decoration: underline; }

    /* –ê–î–ê–ü–¢–ò–í–ù–û–°–¢–¨ */
    @media (max-width: 850px) {
        .register-card { flex-direction: column; }
        .register-visual { padding: 30px; text-align: center; }
        .register-form-container { padding: 30px 20px; }
        .password-row { flex-direction: column; gap: 20px; }
    }
</style>

<!-- –°–∫—Ä–∏–ø—Ç –º–∞—Å–∫–∏ –≤–≤–æ–¥–∞ —Ç–µ–ª–µ—Ñ–æ–Ω–∞ -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.inputmask/5.0.7/jquery.inputmask.min.js"></script>
<script>
    $(document).ready(function(){
        $('input[data-mask="phone"]').inputmask("+7 (999) 999-99-99");
    });
</script>
{% endblock %}