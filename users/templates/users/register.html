<!-- users/templates/users/register.html -->
{% extends "base.html" %}

{% block title %}–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è{% endblock %}

{% block content %}
<div class="register-page-wrapper">

    <!-- –ö–∞—Ä—Ç–æ—á–∫–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ -->
    <div class="register-card fade-in">

        <!-- –õ–ï–í–ê–Ø –ö–û–õ–û–ù–ö–ê (–ò–ù–§–û) -->
        <div class="register-visual">
            <div class="visual-content">
                <h2>–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å!</h2>
                <p>–°–æ–∑–¥–∞–π—Ç–µ –∞–∫–∫–∞—É–Ω—Ç, —á—Ç–æ–±—ã –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å –∑–∞–∫–∞–∑—ã, —Å–æ—Ö—Ä–∞–Ω—è—Ç—å –∞–¥—Ä–µ—Å–∞ –¥–æ—Å—Ç–∞–≤–∫–∏ –∏ –ø–æ–ª—É—á–∞—Ç—å –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è.</p>
            </div>
            <!-- –î–µ–∫–æ—Ä–∞—Ç–∏–≤–Ω—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã -->
            <div class="circle c1"></div>
            <div class="circle c2"></div>
        </div>

        <!-- –ü–†–ê–í–ê–Ø –ö–û–õ–û–ù–ö–ê (–§–û–†–ú–ê) -->
        <div class="register-form-container">
            <h1 class="form-title">–°–æ–∑–¥–∞–Ω–∏–µ –∞–∫–∫–∞—É–Ω—Ç–∞</h1>
            <!-- –ò–°–ü–†–ê–í–õ–ï–ù–ù–ê–Ø –°–°–´–õ–ö–ê –ù–ò–ñ–ï -->
            <p class="form-subtitle">–£–∂–µ –µ—Å—Ç—å –∞–∫–∫–∞—É–Ω—Ç? <a href="{% url 'login' %}" class="link-accent">–í–æ–π—Ç–∏</a></p>

            <form method="post" class="modern-form">
                {% csrf_token %}

                <!-- –û–±—â–∏–µ –æ—à–∏–±–∫–∏ -->
                {% if form.non_field_errors %}
                    <div class="form-error-alert">
                        {% for error in form.non_field_errors %}
                            <p>{{ error }}</p>
                        {% endfor %}
                    </div>
                {% endif %}

                <!-- –ò–º—è -->
                <div class="input-group-modern">
                    <label>–í–∞—à–µ –∏–º—è</label>
                    <div class="input-wrapper">
                        <span class="input-icon">üë§</span>
                        {{ form.first_name }}
                    </div>
                    {% if form.first_name.errors %}
                        <div class="field-error">{{ form.first_name.errors }}</div>
                    {% endif %}
                </div>

                <!-- –¢–µ–ª–µ—Ñ–æ–Ω -->
                <div class="input-group-modern">
                    <label>–¢–µ–ª–µ—Ñ–æ–Ω</label>
                    <div class="input-wrapper">
                        <span class="input-icon">üìû</span>
                        {{ form.phone }}
                    </div>
                    <small class="help-text">–§–æ—Ä–º–∞—Ç: +7 (___) ___-__-__</small>
                    {% if form.phone.errors %}
                        <div class="field-error">{{ form.phone.errors }}</div>
                    {% endif %}
                </div>

                <!-- Email -->
                <div class="input-group-modern">
                    <label>Email <span class="optional">(–Ω–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ, –Ω—É–∂–Ω–æ –¥–ª—è —á–µ–∫–æ–≤ –∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –ø–∞—Ä–æ–ª—è)</span></label>
                    <div class="input-wrapper">
                        <span class="input-icon">‚úâÔ∏è</span>
                        {{ form.email }}
                    </div>
                    {% if form.email.errors %}
                        <div class="field-error">{{ form.email.errors }}</div>
                    {% endif %}
                </div>

                <!-- –ü–∞—Ä–æ–ª–∏ (–≤ —Ä—è–¥ –Ω–∞ –ü–ö) -->
                <div class="password-row">
                    <div class="input-group-modern">
                        <label>–ü–∞—Ä–æ–ª—å</label>
                        <div class="input-wrapper">
                            <span class="input-icon">üîí</span>
                            {{ form.password }}
                        </div>
                        {% if form.password.errors %}
                            <div class="field-error">{{ form.password.errors }}</div>
                        {% endif %}
                    </div>

                    <div class="input-group-modern">
                        <label>–ü–æ–≤—Ç–æ—Ä–∏—Ç–µ –ø–∞—Ä–æ–ª—å</label>
                        <div class="input-wrapper">
                            <span class="input-icon">üîë</span>
                            {{ form.password2 }}
                        </div>
                        {% if form.password2.errors %}
                            <div class="field-error">{{ form.password2.errors }}</div>
                        {% endif %}
                    </div>
                </div>

                <!-- –ö–Ω–æ–ø–∫–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ -->
                <button type="submit" class="btn btn-primary register-btn">
                    –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è
                </button>
            </form>
        </div>
    </div>
</div>

<!-- –°–¢–ò–õ–ò -->
<style>
    /* –ê–Ω–∏–º–∞—Ü–∏—è */
    @keyframes fadeInUp {
        from { opacity: 0; transform: translateY(20px); }
        to { opacity: 1; transform: translateY(0); }
    }
    .fade-in { animation: fadeInUp 0.6s ease-out forwards; }

    /* –û–±—â–∏–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä —Å—Ç—Ä–∞–Ω–∏—Ü—ã */
    .register-page-wrapper {
        display: flex;
        justify-content: center;
        align-items: center;
        min-height: 85vh;
        padding: 40px 20px;
        background-color: #f8f9fa;
        font-family: var(--default-font-family, sans-serif);
    }

    /* –ö–∞—Ä—Ç–æ—á–∫–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ */
    .register-card {
        display: flex;
        width: 100%;
        max-width: 950px;
        background: #fff;
        border-radius: 24px;
        box-shadow: 0 15px 40px rgba(0,0,0,0.08);
        overflow: hidden;
    }

    /* –õ–µ–≤–∞—è –∫–æ–ª–æ–Ω–∫–∞ (–í–∏–∑—É–∞–ª) */
    .register-visual {
        flex: 1;
        background: linear-gradient(135deg, #ff9a9e 0%, #fecfef 99%, #fecfef 100%);
        padding: 50px;
        display: flex;
        flex-direction: column;
        justify-content: center;
        color: #fff;
        position: relative;
        overflow: hidden;
    }
    .visual-content { position: relative; z-index: 2; }
    .register-visual h2 {
        font-size: 2.4rem; margin-bottom: 20px; font-weight: 800;
        text-shadow: 0 2px 10px rgba(0,0,0,0.1); line-height: 1.1;
    }
    .register-visual p { font-size: 1.1rem; line-height: 1.6; opacity: 0.95; }

    /* –î–µ–∫–æ—Ä (–∫—Ä—É–≥–∏) */
    .circle { position: absolute; border-radius: 50%; background: rgba(255,255,255,0.15); }
    .c1 { width: 250px; height: 250px; top: -50px; left: -50px; }
    .c2 { width: 350px; height: 350px; bottom: -100px; right: -80px; }

    /* –ü—Ä–∞–≤–∞—è –∫–æ–ª–æ–Ω–∫–∞ (–§–æ—Ä–º–∞) */
    .register-form-container {
        flex: 1.3;
        padding: 50px;
        background: #fff;
    }

    .form-title { margin: 0 0 10px 0; font-size: 2rem; color: #333; font-weight: 700; }
    .form-subtitle { margin-bottom: 30px; color: #777; font-size: 1rem; }
    .link-accent { color: var(--accent-color, #e53935); text-decoration: none; font-weight: 600; }
    .link-accent:hover { text-decoration: underline; }

    /* –ü–æ–ª—è –≤–≤–æ–¥–∞ */
    .input-group-modern { margin-bottom: 20px; }
    .input-group-modern label { display: block; font-weight: 600; margin-bottom: 8px; color: #555; font-size: 0.9rem; }

    .input-wrapper { position: relative; }
    .input-icon {
        position: absolute; left: 15px; top: 50%; transform: translateY(-50%);
        font-size: 1.2rem; opacity: 0.5; pointer-events: none;
    }

    /* –°—Ç–∏–ª–∏ input */
    .register-form-container input {
        width: 100%;
        padding: 14px 15px 14px 45px; /* –û—Ç—Å—Ç—É–ø —Å–ª–µ–≤–∞ –¥–ª—è –∏–∫–æ–Ω–∫–∏ */
        border: 1px solid #e0e0e0;
        border-radius: 12px;
        font-size: 1rem;
        transition: all 0.2s;
        box-sizing: border-box;
        background: #fcfcfc;
    }
    .register-form-container input:focus {
        border-color: var(--accent-color, #e53935);
        background: #fff;
        outline: none;
        box-shadow: 0 0 0 4px rgba(229, 57, 53, 0.1);
    }

    .password-row { display: flex; gap: 20px; }
    .password-row .input-group-modern { flex: 1; }

    .optional { font-weight: normal; color: #aaa; font-size: 0.85em; }
    .help-text { font-size: 0.8rem; color: #999; margin-top: 5px; display: block; }
    .field-error { color: #dc3545; font-size: 0.85rem; margin-top: 5px; }
    .form-error-alert { background: #ffebee; color: #c62828; padding: 15px; border-radius: 10px; margin-bottom: 20px; }

    /* –ö–Ω–æ–ø–∫–∞ */
    .register-btn {
        width: 100%; padding: 16px; margin-top: 10px;
        font-size: 1.1rem; font-weight: 600; border-radius: 12px;
    }

    /* –ê–î–ê–ü–¢–ò–í–ù–û–°–¢–¨ */
    @media (max-width: 900px) {
        .register-card { flex-direction: column; max-width: 500px; }
        .register-visual { padding: 40px 30px; text-align: center; }
        .register-form-container { padding: 30px 20px; }
        .password-row { flex-direction: column; gap: 0; }
    }
</style>

<!-- –°–∫—Ä–∏–ø—Ç –º–∞—Å–∫–∏ –≤–≤–æ–¥–∞ —Ç–µ–ª–µ—Ñ–æ–Ω–∞ -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.inputmask/5.0.7/jquery.inputmask.min.js"></script>
<script>
    $(document).ready(function(){
        $('input[data-mask="phone"]').inputmask("+7 (999) 999-99-99");
    });
</script>
{% endblock %}